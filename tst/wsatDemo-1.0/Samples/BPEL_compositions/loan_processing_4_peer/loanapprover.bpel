<process name="approver" 
         targetNamespace="http://acme.com/loanassessor"
         suppressJoinFailure="yes"
         xmlns="http://schemas.xmlsoap.org/ws/2003/03/business-process/"
         xmlns:lns="http://loans.org/wsdl/loan-approval"
         xmlns:loandef="http://tempuri.org/services/loandefinitions" 
         xmlns:asns="http://tempuri.org/services/loanassessor"
         xmlns:apns="http://tempuri.org/services/loanapprover">

  <variables>
    <variable name="request" 
               messageType="loandef:creditInformationMessage"/>
    <variable name="approvalInfo" 
               messageType="apns:approvalMessage"/>
  </variables>

  <partners>
    <partner name="customer" 
             serviceLinkType="lns:loanApprovalLinkType"
             myRole="approver"/>
  </partners>

  <sequence>
    <receive name="receive1" partner="customer" 
             portType="apns:loanApprovalPT" 
             operation="approve" variable="request"
             createInstance="yes">
    </receive>

    <assign name="assign">
      <copy>
        <from expression="'yes'"/>
        <to variable="approvalInfo" part="accept"/>
      </copy>
    </assign>

    <reply name="reply" partner="customer" portType="apns:loanApprovalPT" 
           operation="approve" variable="approvalInfo">
    </reply>

  </sequence>
</process>
